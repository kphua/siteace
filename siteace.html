<head>
  <title>siteace</title>
</head>

<body>

</body>

<template name="ApplicationLayout">
  {{> yield "navbar"}}
  {{> yield "main"}}
</template>

<template name="navbar">
	<!-- navbar  - you will be putting the login functions here -->
	<nav class="navbar navbar-default navbar-fixed-top">
		<div class="container">
			<a class="navbar-brand" href="#">Site Ace</a>
			<form class="navbar-form navbar-left" role="search">
				<div class="input-group">
		      <input type="text" class="form-control search-padding" placeholder="Search for..." id="search">
					<span id="searchclear" class="searchclear glyphicon glyphicon-remove-circle hidden_div"></span>
		      <span class="input-group-btn">
		        <button class="btn btn-default js-search-filter" type="button">
							<span class="glyphicon glyphicon-search" aria-hidden="true"></span>
						</button>
		      </span>
		    </div><!-- /input-group -->
			</form>
			<p class="navbar-text navbar-right">
				{{> loginButtons align="right"}}
			</p>
		</div>  <!-- / nav container -->
	</nav>
</template>

<template name="websites">
	<div class="container top-margin">
		{{> website_form}}
		{{> website_list}}
	</div>
</template>

<template name="website">
	<div class="container top-margin">
		{{> website_detail}}
	</div>
</template>

<template name="website_form">
	{{isLoggedIn}}
	{{#if currentUser}}
		<p>
			<a class="btn btn-primary js-toggle-website-form" href="#">
		  	Add a Website
			</a>
		</p>
	{{/if}}
	<div id="website_form" class="hidden_div">
		<form class="js-save-website-form">
		  <div class="form-group">
		    <label for="url">Site address</label>
				<div class="input-group">
		      <input type="url" class="form-control" id="url" placeholder="http://www.mysite.com" required>
		      <span class="input-group-btn">
		        <button class="btn btn-info js-get-metas" type="button">Retrieve Fields</button>
		      </span>
		    </div><!-- /input-group -->
				<span class="text-info">{{getMetasStatus}}</span>
		  </div>
		  <div class="form-group">
		    <label for="title">Title</label>
		    <input type="text" class="form-control" id="title" placeholder="Mysite" value="{{retrievedTitle}}" required>
		  </div>
		    <div class="form-group">
		    <label for="description">Description</label>
		    <input type="text" class="form-control" id="description" value="{{retrievedDescription}}" placeholder="I found this site really useful for ..." required>
		  </div>

		  <button type="submit" class="btn btn-default">Submit</button>
		</form>
		<br />
	</div>
</template>

<!-- template that displays several website items -->
<template name="website_list">
	<ol class="list-group">
	{{#each websites}}
	{{>website_item}}
	{{/each}}
	</ol>
</template>

<!-- template that displays individual website entries -->
<template name="website_item">
<li class="list-group-item">
	<div class="row side-padding">
		<a class="text-title" href="{{url}}">{{title}}</a>
		<a class="btn btn-primary align-right" href="/website/{{_id}}">View Details</a>
	</div>
	<div class="row">
		<div class="col-sm-9">
			<p class="description-font">
				{{description}}
			</p>
			<p class="light-text">
				Added On: {{moFormat createdOn 'ddd, DD MMM YYYY HH:MM'}} 路
				Upvotes: {{upvotes}} 路
				Downvotes: {{downvotes}}
			</p>
		</div>
		<div class="col-sm-3">
			{{isLoggedIn}}
			{{#if currentUser}}
				<div class="align-right margin-top">
					<a href="#" class="btn btn-default js-upvote btn-sm">
						<span class="glyphicon glyphicon-thumbs-up" aria-hidden="true"></span>
						<span class="icon-btn-text">upvote</span>
					</a>
					<a href="#" class="btn btn-default js-downvote btn-sm">
						<span class="glyphicon glyphicon-thumbs-up" aria-hidden="true"></span>
						<span class="icon-btn-text">downvote</span>
					</a>
				</div>
			{{/if}}
		</div>
	</div>
</li>
</template>

<!-- template that displays details of a selected website -->
<template name="website_detail">
	<a class="btn btn-default" href="/">Back</a>
	<br />
	<br />
	<div class="jumbotron">
		<h1><a href="{{url}}">{{title}}</a></h1>
		<p>{{description}}</p>
		<p class="light-text">
			Added On: {{moFormat createdOn 'ddd, DD MMM YYYY HH:MM'}} 路
			Upvotes: {{upvotes}} 路
			Downvotes: {{downvotes}}
		</p>
	</div>
	<div class="page-header">
		<h2>Comments</h2>
	</div>
	<p>
		{{> comment_form}}
	</p>

	{{#each comments}}
	{{> comment}}
	{{else}}
  	<p>No comments yet.</p>
	{{/each}}
</template>

<!-- template that displays individual comment of a selected website -->
<template name="comment">
	<div class="well">
		<strong>{{username}}</strong><span class="message-date">{{moFromNow commentedOn}}</span>
		<br />
		{{message}}
	</div>
</template>

<template name="comment_form">
	{{isLoggedIn}}
	{{#if currentUser}}
		<div id="comment_form">
			<form class="js-save-comment-form">
				<div class="input-group">
		      <input type="text" class="form-control" placeholder="Write a comment..." id="message">
		      <span class="input-group-btn">
		        <button type="submit" class="btn btn-success js-">Go!</button>
		      </span>
		    </div><!-- /input-group -->
			</form>
		</div>
		<br />
	{{/if}}
</template>
